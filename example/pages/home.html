<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <base href="{{base}}" />
  <script type="text/javascript">
    "{{init}}"
  </script>
  <link href="shared/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
  <link href="shared/style.css" rel="stylesheet" />
  <script src="shared/jquery/jquery-3.4.1.slim.min.js"></script>
  <script src="shared/popper.js/popper.min.js"></script>
  <script src="shared/bootstrap/js/bootstrap.min.js"></script>
  <title>Sample Page</title>
</head>

<body>
  <nav class="navbar navbar-expand-lg navbar-light fixed-top bd-navbar">
    <h1 class="navbar-brand">
      Workflow and Validation example using vscode-page.
    </h1>
  </nav>
  <div class="container-fluid" style="margin-top:63px;">
    <div class="row  flex-xl-nowrap">
      <div class="col-md-3 col-xl-2 bd-sidebar no-padding">
        <div class="bd-search d-flex py-md-3 pb-md-3">
        </div>
        <ul id="users" class="py-md-3 sidebar-sticky"></ul>
        <button type="button" class="btn btn-secondary" id="addUserBtn" onclick="showAddUserPage1()">
          Add User
        </button>
      </div>
      <main class="col-md-9 col-xl-10 py-md-3 pl-md-4 pr-md-4 bd-content">
        <h2 id="title"></h2>
        <hr />
        <div id="content"></div>
      </main>
    </div>
  </div>
  <script type="text/javascript">
    initEventListener();

    const vscode = acquireVsCodeApi();
    init();
    let wizardMap = new Map();

    function showAddUserPage1() {
      vscode.postMessage({
        command: "showAddUserPage1"
      });
    }

    function validateAddUserPage1() {
      var name1 = document.getElementById("addusername").value;
      var age1 = document.getElementById("adduserage").value;
      var country1 = document.getElementById("addusercountry").value;
      wizardMap['name'] = name1;
      wizardMap['age'] = age1;
      wizardMap['country'] = country1;
      vscode.postMessage({
        command: "validateAddUserPage1",
        parameters: wizardMap
      });
    }

    function validateCreditCardNumber() {
      var ccnum1 = document.getElementById("ccnumber").value;
      wizardMap['ccnum'] = ccnum1;
      vscode.postMessage({
        command: "validateCreditCardNumber",
        parameters: wizardMap
      });
    }
    function validateFavoriteColor() {
      var favcolor1 = document.getElementById("favcolor").value;
      wizardMap['favcolor'] = favcolor1;
      // do nothing
    }
    

    function showAddUserPage2() {
      var name1 = document.getElementById("addusername").value;
      var age1 = document.getElementById("adduserage").value;
      var country1 = document.getElementById("addusercountry").value;
      wizardMap['name'] = name1;
      wizardMap['age'] = age1;
      wizardMap['country'] = country1;
      
      vscode.postMessage({
        command: "showAddUserPage2",
        parameters: wizardMap
      });
    }

    function submitAddUser() {
      var ccnum = document.getElementById("ccnumber").value;
      var favcolor = document.getElementById("favcolor").value;
      vscode.postMessage({
        command: "submitAddUser",
        parameters: wizardMap
      });
    }

    function showUser(userid) {
      vscode.postMessage({
        command: "showUser",
        parameters: {
          userid: userid
        }
      });
    }

    function init() {
      vscode.postMessage({
        command: "ready"
      });
    }

    function cancelSetting() {
      init();
    }
  </script>
</body>

</html>